@startuml
skinparam direction LeftToRight
skinparam style strictuml
skinparam backgroundColor #F3F4F6
skinparam node {
    BackgroundColor White
    BorderColor Black
    FontColor Black
}
skinparam arrow {
    Color #000088
    Thickness 2
}
skinparam diamond {
    BackgroundColor #E8EAF6
    BorderColor #5C6BC0
}
skinparam activity {
    BackgroundColor #FFFBF3
    BorderColor #FFC107
}
skinparam start {
    BackgroundColor #AED581
    BorderColor Black
}
skinparam end {
    BackgroundColor #F06292
    BorderColor Black
}

start
:Configuration Update;
:Export Runtime Configurations\n(from Persistent Store);
:Fetch AMI Templates\n(from Repository);
if (Compare Runtime State\nwith AMI Templates?) then (Mismatch)
  :Resolve Discrepancies\n(Reconcile Changes);
  :Store Reconciled Templates\n(Version-Controlled Repository);
  :Bake New AMI\n(with Reconciled Configurations);
  :Deploy AMI Across Cluster;
  :Inject Environment-Specific\nSettings (Dynamic Load);
  if (Validate Cluster Sync\n(Propagate Runtime Configs?)) then (Successful Sync)
    :Monitor for Drift\n(Alerts + Remediation);
    stop
  else (Sync Failure)
    :Resolve Discrepancies\n(Reconcile Changes);
  endif
else (No Discrepancy)
  stop
endif
@enduml
